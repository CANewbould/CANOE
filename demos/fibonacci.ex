--------------------------------------------------------------------------------
-- Test application: fibonacci.ex
--------------------------------------------------------------------------------
--Version: 4.1.0.0
--Date: 2022.03.13
--Author: C A Newbould
--Status: Complete
--Changes:
--* created
--------------------------------------------------------------------------------
-- prompt for limit
--------------------------------------------------------------------------------
include sequence.e -- for 's2i'
include input.e -- for 'input'
constant n = s2i(input("Value required?"))
--------------------------------------------------------------------------------
-- Define the functions
--------------------------------------------------------------------------------
function fibonacci(integer a)
    switch a do
    case 0 then return 0
    case 1 then return 1
    case else
        return fibonacci(a-1) + fibonacci(a-2)
    end switch
end function
--------------------------------------------------------------------------------
-- for map
--------------------------------------------------------------------------------
function fib(integer a,sequence b)
    return b&fibonacci(a)
end function
--------------------------------------------------------------------------------
-- Select the output mode
--------------------------------------------------------------------------------
with define IUP
--------------------------------------------------------------------------------
-- Start output
--------------------------------------------------------------------------------
include io.e -- for 'writef','writefln','writel'
writef(n,"The %dth term: ") writefln(fibonacci(n),"%d")
--------------------------------------------------------------------------------
-- Generate series
--------------------------------------------------------------------------------
writefln(n,"Series to %d:")
writel(foldr(range(n,0),"fib",{}))
--------------------------------------------------------------------------------
display("The Fibonacci Series")
--------------------------------------------------------------------------------
-- Previous versions
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
